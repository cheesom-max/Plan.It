<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI 기반 맞춤형 여행 일정 생성기 - 당신만을 위한 최적의 여행 경로를 AI가 설계합니다">
    <title>Plan.It - AI 맞춤형 여행 일정 생성기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">✈️</span>
                <span class="logo-text">Plan.It</span>
            </div>
            <!-- 로그인 전: 로그인/회원가입 버튼 -->
            <div class="auth-buttons" id="authButtons">
                <button class="login-btn" id="loginBtn">
                    <span class="btn-icon">👤</span>
                    로그인
                </button>
                <button class="signup-btn" id="signupBtn">
                    회원가입
                </button>
            </div>
            <!-- 로그인 후: 사용자 프로필 (기본 숨김) -->
            <div class="user-profile" id="userProfile" style="display: none;">
                <button class="profile-btn" id="profileBtn">
                    <span class="profile-avatar">👤</span>
                    <span class="profile-email" id="profileEmail">user@email.com</span>
                    <span class="profile-arrow">▼</span>
                </button>
                <div class="profile-dropdown" id="profileDropdown">
                    <button class="dropdown-item" id="myInfoBtn">
                        <span>👤</span> 내 정보
                    </button>
                    <button class="dropdown-item" id="myTripsBtn">
                        <span>✈️</span> 내 여행
                    </button>
                    <div class="dropdown-divider"></div>
                    <button class="dropdown-item" id="logoutBtn">
                        <span>🚪</span> 로그아웃
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section - Airbnb Style -->
    <section class="hero hero-airbnb">
        <div class="hero-overlay"></div>
        <div class="hero-center-content">
            <!-- 메인 헤드라인 -->
            <h1 class="hero-headline">
                2만 명이 선택한<br>
                <span class="headline-accent">여행 계획법</span>
            </h1>
            <p class="hero-tagline">
                맛집-교통-숙소-동선까지 5분 안에 자동 완성됩니다.
            </p>

            <!-- 검색 박스 (에어비앤비 스타일) -->
            <div class="hero-search-box">
                <form class="hero-search-form" id="heroSearchForm">
                    <div class="search-field search-field-destination">
                        <label>여행지가 어디신가요?</label>
                        <input type="text" id="heroDestination" class="hero-search-input destination-input"
                            placeholder="여행지 검색" autocomplete="off">
                        <div class="search-suggestions hero-suggestions"></div>
                    </div>
                    <div class="search-divider"></div>
                    <div class="search-field search-field-date">
                        <label>언제 출발하세요?</label>
                        <input type="date" id="heroStartDate" class="hero-search-input">
                    </div>
                    <div class="search-divider"></div>
                    <div class="search-field search-field-date">
                        <label>언제 돌아오세요?</label>
                        <input type="date" id="heroEndDate" class="hero-search-input">
                    </div>
                    <button type="button" class="hero-search-btn" id="heroSearchBtn">
                        <span class="search-btn-icon">🔍</span>
                        <span class="search-btn-text">내 여행 계획 받기</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="hero-scroll-indicator">
            <span class="scroll-text">상세 옵션 선택</span>
            <div class="scroll-arrow">↓</div>
        </div>
    </section>

    <!-- Travel Form Section -->
    <section class="travel-form-section" id="travelForm">
        <div class="form-container">
            <div class="form-header">
                <span class="form-badge">✨ AI 맞춤 설계</span>
                <h2 class="form-title">나만의 여행 계획 시작하기</h2>
                <p class="form-subtitle">아래 정보를 입력하시면 AI가 최적의 일정을 설계해드립니다</p>
            </div>

            <form class="travel-form" id="travelPlanForm">
                <!-- Destination Input - Multiple Destinations -->
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">📍</span>
                        어디로 떠나시나요?
                        <span class="label-hint">(최대 5곳까지 추가 가능)</span>
                    </label>

                    <!-- 여행지 목록 컨테이너 -->
                    <div class="destinations-container" id="destinationsContainer">
                        <!-- 첫 번째 여행지 (기본) -->
                        <div class="destination-item" data-index="0">
                            <div class="destination-number">1</div>
                            <div class="search-input-wrapper">
                                <input type="text" class="form-input search-input destination-input"
                                    placeholder="도시 또는 국가를 검색하세요" autocomplete="off" data-index="0">
                                <span class="search-icon">🔍</span>
                                <div class="search-suggestions">
                                    <!-- 동적으로 검색 결과 표시 -->
                                </div>
                            </div>
                            <button type="button" class="remove-destination-btn" title="삭제" style="visibility: hidden;">
                                <span>✕</span>
                            </button>
                        </div>
                    </div>

                    <!-- 여행지 추가 버튼 -->
                    <button type="button" class="add-destination-btn" id="addDestinationBtn">
                        <span class="add-icon">+</span>
                        <span>여행지 추가</span>
                    </button>

                    <!-- 선택된 여행지 태그 표시 -->
                    <div class="selected-destinations" id="selectedDestinations">
                        <!-- 선택된 여행지가 태그로 표시됨 -->
                    </div>
                </div>

                <!-- Date Selection -->
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">📅</span>
                        언제 떠나시나요?
                    </label>
                    <div class="date-inputs">
                        <div class="date-input-wrapper">
                            <label class="date-sublabel">출발일</label>
                            <input type="date" class="form-input date-input" name="start_date" id="startDate">
                        </div>
                        <span class="date-separator">~</span>
                        <div class="date-input-wrapper">
                            <label class="date-sublabel">도착일</label>
                            <input type="date" class="form-input date-input" name="end_date" id="endDate">
                        </div>
                    </div>
                </div>

                <!-- Travel Companion -->
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">👥</span>
                        누구와 함께 가나요?
                    </label>
                    <div class="companion-options">
                        <label class="companion-option">
                            <input type="radio" name="companion" value="alone" id="companionAlone">
                            <span class="companion-card">
                                <span class="companion-icon">🧍</span>
                                <span class="companion-text">혼자</span>
                            </span>
                        </label>
                        <label class="companion-option">
                            <input type="radio" name="companion" value="friends" id="companionFriends">
                            <span class="companion-card">
                                <span class="companion-icon">👫</span>
                                <span class="companion-text">친구</span>
                            </span>
                        </label>
                        <label class="companion-option">
                            <input type="radio" name="companion" value="couple" id="companionCouple">
                            <span class="companion-card">
                                <span class="companion-icon">💑</span>
                                <span class="companion-text">연인</span>
                            </span>
                        </label>
                        <label class="companion-option">
                            <input type="radio" name="companion" value="family" id="companionFamily">
                            <span class="companion-card">
                                <span class="companion-icon">👨‍👩‍👧‍👦</span>
                                <span class="companion-text">가족</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Travel Style - Instagram Style Cards -->
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">🎨</span>
                        여행 스타일 <span class="label-hint">(복수 선택 가능)</span>
                    </label>
                    <div class="style-cards-grid">
                        <label class="style-card" data-style="food">
                            <input type="checkbox" name="style" value="food">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🍽️</span>
                                <span class="card-text">맛집 탐방</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="relax">
                            <input type="checkbox" name="style" value="relax">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🏖️</span>
                                <span class="card-text">휴양</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="activity">
                            <input type="checkbox" name="style" value="activity">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🏄</span>
                                <span class="card-text">액티비티</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="culture">
                            <input type="checkbox" name="style" value="culture">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🎭</span>
                                <span class="card-text">문화예술</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="shopping">
                            <input type="checkbox" name="style" value="shopping">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🛍️</span>
                                <span class="card-text">쇼핑</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="nature">
                            <input type="checkbox" name="style" value="nature">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🌿</span>
                                <span class="card-text">자연 탐험</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="photo">
                            <input type="checkbox" name="style" value="photo">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">📸</span>
                                <span class="card-text">포토 스팟</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                        <label class="style-card" data-style="nightlife">
                            <input type="checkbox" name="style" value="nightlife">
                            <div class="card-bg"></div>
                            <div class="card-content">
                                <span class="card-icon">🌙</span>
                                <span class="card-text">나이트라이프</span>
                            </div>
                            <div class="card-check">✓</div>
                        </label>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-submit">
                    <button type="submit" class="submit-btn" id="generateBtn">
                        <span class="btn-sparkle">✨</span>
                        <span class="btn-text">일정 생성하기</span>
                        <span class="btn-arrow-right">→</span>
                    </button>
                    <p class="submit-hint">AI가 약 10초 내에 맞춤 일정을 생성해드립니다</p>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <p>&copy; 2026 Plan.It. All rights reserved.</p>
        </div>
    </footer>

    <!-- 로그인/회원가입 모달 -->
    <div class="auth-modal-overlay" id="authModalOverlay">
        <div class="auth-modal">
            <button class="modal-close" id="modalClose">✕</button>

            <!-- 모달 헤더/탭 -->
            <div class="auth-tabs">
                <button class="auth-tab active" id="loginTab" data-tab="login">로그인</button>
                <button class="auth-tab" id="signupTab" data-tab="signup">회원가입</button>
            </div>

            <!-- 로그인 폼 -->
            <form class="auth-form" id="loginForm">
                <!-- 구글 로그인 버튼 -->
                <button type="button" class="google-login-btn" id="googleLoginBtn">
                    <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
                        <path fill="#4285F4"
                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                        <path fill="#34A853"
                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                        <path fill="#FBBC05"
                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                        <path fill="#EA4335"
                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                    </svg>
                    <span>Google로 계속하기</span>
                </button>

                <!-- 구분선 -->
                <div class="auth-divider">
                    <span>또는</span>
                </div>

                <div class="auth-form-group">
                    <label class="auth-label">이메일</label>
                    <input type="email" class="auth-input" id="loginEmail" placeholder="your@email.com" required>
                </div>
                <div class="auth-form-group">
                    <label class="auth-label">비밀번호</label>
                    <input type="password" class="auth-input" id="loginPassword" placeholder="비밀번호 입력" required>
                </div>
                <button type="submit" class="auth-submit-btn" id="loginSubmitBtn">
                    <span class="btn-text">로그인</span>
                </button>
            </form>

            <!-- 회원가입 폼 (기본 숨김) -->
            <form class="auth-form" id="signupForm" style="display: none;">
                <div class="auth-form-group">
                    <label class="auth-label">이메일</label>
                    <input type="email" class="auth-input" id="signupEmail" placeholder="your@email.com" required>
                </div>
                <div class="auth-form-group">
                    <label class="auth-label">비밀번호</label>
                    <input type="password" class="auth-input" id="signupPassword" placeholder="6자 이상 입력" minlength="6"
                        required>
                </div>
                <div class="auth-form-group">
                    <label class="auth-label">비밀번호 확인</label>
                    <input type="password" class="auth-input" id="signupPasswordConfirm" placeholder="비밀번호 다시 입력"
                        required>
                </div>
                <button type="submit" class="auth-submit-btn" id="signupSubmitBtn">
                    <span class="btn-text">회원가입</span>
                </button>
            </form>

            <!-- 에러 메시지 -->
            <div class="auth-error" id="authError" style="display: none;"></div>
        </div>
    </div>

    <!-- 일정 결과는 itinerary.html 페이지에서 표시됩니다 -->

    <!-- 내 정보 모달 -->
    <div class="modal-overlay" id="myInfoModalOverlay">
        <div class="modal-content">
            <button class="modal-close" id="myInfoModalClose">✕</button>
            <h2 class="modal-title">👤 내 정보</h2>
            <div class="my-info-content">
                <div class="info-avatar">
                    <span class="avatar-icon">👤</span>
                </div>
                <div class="info-group">
                    <label class="info-label">이메일</label>
                    <p class="info-value" id="myInfoEmail">-</p>
                </div>
                <div class="info-group">
                    <label class="info-label">닉네임</label>
                    <input type="text" class="info-input" id="myInfoNickname" placeholder="닉네임을 입력하세요">
                </div>
                <div class="info-group">
                    <label class="info-label">가입일</label>
                    <p class="info-value" id="myInfoCreatedAt">-</p>
                </div>
                <button class="btn-save-info" id="saveInfoBtn">저장하기</button>
            </div>
        </div>
    </div>

    <!-- 내 여행 모달 -->
    <div class="modal-overlay" id="myTripsModalOverlay">
        <div class="modal-content modal-large">
            <button class="modal-close" id="myTripsModalClose">✕</button>
            <h2 class="modal-title">✈️ 내 여행</h2>
            <div class="my-trips-content">
                <div class="trips-list" id="tripsList">
                    <!-- 여행 목록이 동적으로 추가됨 -->
                    <div class="trips-empty" id="tripsEmpty">
                        <span class="empty-icon">🗺️</span>
                        <p>아직 저장된 여행이 없습니다.</p>
                        <p class="empty-hint">새로운 여행을 계획해보세요!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="supabase.js"></script>
    <script src="auth.js"></script>
    <script src="api.js"></script>
    <script src="script.js"></script>
</body>

</html>